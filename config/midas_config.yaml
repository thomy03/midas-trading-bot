# =============================================================================
# MIDAS V8.1 - Centralized Configuration
# =============================================================================
# All thresholds and parameters in one place.
# Code should read from this file instead of hardcoding values.
# Created: 2026-02-11
# =============================================================================

scoring:
  pillar_weights:
    technical: 0.55
    fundamental: 0.45
    sentiment: 0.00
    news: 0.00
    ml: 0.00
  thresholds:
    strong_buy: 70
    buy: 55
    hold: 40
    sell: 25
  ml_gate:
    enabled: true
    min_score_aggressive: 40
    min_score_moderate: 50
    boost_threshold: 60
    boost_points: 5

risk:
  trailing_stop:
    activation_pct: 5.0
    distance_pct: 5.0  # unified - was 3% in one place, 12% in another
  max_hold_days: 30
  circuit_breakers:
    daily_loss_pct: 3.0
    max_drawdown_pct: 15.0
    consecutive_losses: 5
    emergency_stop_drawdown_pct: 25.0  # NEW - total stop (not just defensive)
  position_sizing:
    method: "score_based"  # the one actually used
    aggressive_base_pct: 8.0
    moderate_base_pct: 5.0
    score_multipliers:
      90: 2.0
      85: 1.6
      80: 1.2
      default: 1.0

market:
  sessions:
    eu_start: "08:00"
    overlap_start: "15:30"
    us_only_start: "17:30"
    close: "22:00"
    timezone: "Europe/Paris"
  ticker_files:
    eu: ["cac40.json", "europe.json"]
    us: ["nasdaq.json", "sp500.json"]

strategies:
  aggressive_ml_llm:
    min_score: 70
    max_positions: 10
    position_size_pct: 8.0
    sl_atr_mult: 1.5
    tp_atr_mult: 3.0
    use_ml_gate: true
    ml_min_score: 40
  aggressive_ml_nollm:
    min_score: 70
    max_positions: 10
    position_size_pct: 8.0
    sl_atr_mult: 1.5
    tp_atr_mult: 3.0
    use_ml_gate: false
  moderate_ml_llm:
    min_score: 78
    max_positions: 6
    position_size_pct: 5.0
    sl_atr_mult: 2.0
    tp_atr_mult: 4.0
    use_ml_gate: true
    ml_min_score: 50
  moderate_ml_nollm:
    min_score: 78
    max_positions: 6
    position_size_pct: 5.0
    sl_atr_mult: 2.0
    tp_atr_mult: 4.0
    use_ml_gate: false

regime:
  detection:
    vix_volatile_threshold: 30
    trend_bull_threshold: 3.0
    trend_bear_threshold: -3.0
    ema50_distance_threshold: 3.0
  score_multipliers:
    strong_bull: 1.10
    bull: 1.05
    range: 1.00
    bear: 0.90
    strong_bear: 0.80
    crash: 0.60

defensive:
  levels:
    none: {max_invested_pct: 100, min_score: 75, stop_loss_pct: 8, max_positions: 20}
    cautious: {max_invested_pct: 70, min_score: 78, stop_loss_pct: 6, max_positions: 15}
    defensive: {max_invested_pct: 30, min_score: 85, stop_loss_pct: 4, max_positions: 8}
    maximum: {max_invested_pct: 15, min_score: 90, stop_loss_pct: 3, max_positions: 5}

execution:
  mode: paper  # paper | ibkr
  ibkr:
    host: 127.0.0.1
    port: 4002
    client_id: 1
    readonly: false
